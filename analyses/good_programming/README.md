# Literate and reproducible programming

Your own programs serve two related purposes. First, there is the obvious 
purpose of executing the analysis. Second, though, is a goal that is just as 
important to science as the analysis itself - recording the steps of the 
analysis so that it is fully reproducible.

Your code and your description and interpretation of the analyses can be in 
separate files, such as an R script and a notebook. This can work well in many 
cases, and is certainly a step up from having no documentation at all of what 
you did.

But since the code and your notebook both serve the same purpose it can be more 
convenient and clear to combine them into a single file. This file is  
executable by the computer, allowing you to quickly revise and update your 
analyses, and others to reproduce and modify them. It is also human readable, 
allowing the reader to understand the intent, implementation, and results of 
your work.

This is literate and reproducible programming.


# Embed your notebook into your code as comments

One approach to integrating your code and notebook is to embed your notebook as 
comments right into your program. Comments are bits of text in your program 
file that aren't executed, they are intended only for people that read the 
program file itself. In many languages, including R and Python, text after a 
`#` is ignored when the program is run.

Your analysis could, for example, consist of a file named `my_analysis.r`. See 
the example file by this name.

You can then run your analysis by entering the following at the command line:

    R CMD BATCH my_analysis.r
    
This will generate two new files. `Rplots.pdf` has the plots that were 
generated by the script. `my_analysis.r.Rout` has the text output of the 
analysis

The `my_analysis.r` file includes all the code needed to execute the analysis, 
a description of the intent and primary question, comments on how the code 
runs, and my interpretations of the results as they pertain to the original 
question. I have achieved all the goals of executing and documenting my 
analyses in a single file.

But there are a few few things that are inconvenient. In particular, the results 
of the analysis are disembodied from the code and supporting discussion. 
Anyone that reviews the analysis (including yourself) will have to flip between 
three files - the source, the text output, and the plots.

# Embed your code in your notebook

There are a series of new tools that allow you to embed your code into a
document, and then generate a data report that include the text from the 
document, the code, and the results of the analyses. One such tool is 
[knitr](http://yihui.name/knitr/). You can then share the source file and the 
report. Providing both allows others to reproduce and modify our analyses, and 
also to take a look at what you did without needing to recompute it all 
themselves.

knitr supports multiple document markup languages, including 
[LaTeX](http://www.latex-project.org) and 
[Markdown](http://daringfireball.net/projects/markdown/). LaTeX is generally 
used to generate pdf reports and Markdown to generate html reports, though, 
with some trouble, any format of report can be produced from any type of 
document. knitr is commonly used for R code, though it does support other 
programming languages including Python.

knit can be used to organize your analyses as you do them, to generate 
supplementary files for a manuscript, or even to generate a manuscript itself. 

